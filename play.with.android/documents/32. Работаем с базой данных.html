<!DOCTYPE html>
<!-- saved from url=(0056)http://developer.alexanderklimov.ru/android/database.php -->
<html class="gr__developer_alexanderklimov_ru mdl-js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Android: Работаем с базой данных</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="./32. Работаем с базой данных_files/bootstrap.min.css">
<link rel="stylesheet" href="./32. Работаем с базой данных_files/font-awesome.min.css">
<link rel="stylesheet" href="./32. Работаем с базой данных_files/custom.css">
    
<link rel="icon" href="http://developer.alexanderklimov.ru/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="http://developer.alexanderklimov.ru/favicon.ico" type="image/x-icon">
<style type="text/css">
body {
    padding-top: 60px;
    padding-bottom: 10px;
}

</style>

<link rel="stylesheet" href="./32. Работаем с базой данных_files/material.indigo-light_blue.min.css"> 
<script src="./32. Работаем с базой данных_files/cb=gapi.loaded_1" async=""></script><script src="./32. Работаем с базой данных_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" async="" src="./32. Работаем с базой данных_files/plusone.js.Без названия" gapi_processed="true"></script><script src="./32. Работаем с базой данных_files/material.min.js.Без названия"></script><style type="text/css">
:root .banner_box,
:root .adv,
:root img[alt="Google+"],
:root .g-plusone,
:root .container > .infoBoxList > .shareInfoBox,
:root .back-to-top
{ display: none !important; }</style><style type="text/css">img[src="//ssl.gstatic.com/images/icons/gplus-16.png"],
img[src="http://db.c7.b3.a0.top.mail.ru/counter?id=228158;t=223;l=1"],
img[src="http://feeds.feedburner.com/~fc/alexanderklimov/VJcl?bg=0099CC&fg=444444&anim=0"],
iframe[src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=small&annotation=inline&width=300&align=right&hl=ru&origin=http%3A%2F%2Fdeveloper.alexanderklimov.ru&url=http%3A%2F%2Fdeveloper.alexanderklimov.ru%2Fandroid%2Fmybrowser.php&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.LDDegL6ImS0.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCO3moWK4VG6CcM19m5AII4n45L9HA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&id=I0_1476609915130&parent=http%3A%2F%2Fdeveloper.alexanderklimov.ru&pfname=&rpctoken=39351780"],
iframe[src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=small&annotation=inline&width=300&align=right&hl=ru&origin=http%3A%2F%2Fdeveloper.alexanderklimov.ru&url=http%3A%2F%2Fdeveloper.alexanderklimov.ru%2Fandroid%2Fkeyboard.php&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.LDDegL6ImS0.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCO3moWK4VG6CcM19m5AII4n45L9HA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&id=I0_1476609918063&parent=http%3A%2F%2Fdeveloper.alexanderklimov.ru&pfname=&rpctoken=34611376"],
iframe[src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=small&annotation=inline&width=300&align=right&hl=ru&origin=http%3A%2F%2Fdeveloper.alexanderklimov.ru&url=http%3A%2F%2Fdeveloper.alexanderklimov.ru%2Fandroid%2Fphotocamera.php&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.LDDegL6ImS0.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCO3moWK4VG6CcM19m5AII4n45L9HA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&id=I0_1476609924544&parent=http%3A%2F%2Fdeveloper.alexanderklimov.ru&pfname=&rpctoken=38449442"],
iframe[src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=small&annotation=inline&width=300&align=right&hl=ru&origin=http%3A%2F%2Fdeveloper.alexanderklimov.ru&url=http%3A%2F%2Fdeveloper.alexanderklimov.ru%2Fandroid%2Fpreferences_framework.php&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.LDDegL6ImS0.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCO3moWK4VG6CcM19m5AII4n45L9HA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&id=I0_1476610245136&parent=http%3A%2F%2Fdeveloper.alexanderklimov.ru&pfname=&rpctoken=33320998"],
img[src="http://db.c7.b3.a0.top.mail.ru/counter?id=228158;js=13;r=http%3A//developer.alexanderklimov.ru/android/;j=false;s=1920*1080;d=24;rand=0.8968678208909526"],
iframe[src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=small&annotation=inline&width=300&align=right&hl=ru&origin=http%3A%2F%2Fdeveloper.alexanderklimov.ru&url=http%3A%2F%2Fdeveloper.alexanderklimov.ru%2Fandroid%2Ftexteditor.php&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.LDDegL6ImS0.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCO3moWK4VG6CcM19m5AII4n45L9HA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&id=I0_1476610245913&parent=http%3A%2F%2Fdeveloper.alexanderklimov.ru&pfname=&rpctoken=29312210"],
img[src="http://db.c7.b3.a0.top.mail.ru/counter?id=228158;js=13;r=http%3A//developer.alexanderklimov.ru/android/;j=false;s=1920*1080;d=24;rand=0.8235180848242223"],
iframe[src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=small&annotation=inline&width=300&align=right&hl=ru&origin=http%3A%2F%2Fdeveloper.alexanderklimov.ru&url=http%3A%2F%2Fdeveloper.alexanderklimov.ru%2Fandroid%2Fmapintent.php&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.LDDegL6ImS0.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCO3moWK4VG6CcM19m5AII4n45L9HA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&id=I0_1476610247545&parent=http%3A%2F%2Fdeveloper.alexanderklimov.ru&pfname=&rpctoken=35891489"],
img[src="http://db.c7.b3.a0.top.mail.ru/counter?id=228158;js=13;r=http%3A//developer.alexanderklimov.ru/android/;j=false;s=1920*1080;d=24;rand=0.5367906840651004"],
iframe[src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=small&annotation=inline&width=300&align=right&hl=ru&origin=http%3A%2F%2Fdeveloper.alexanderklimov.ru&url=http%3A%2F%2Fdeveloper.alexanderklimov.ru%2Fandroid%2Fbroadcast.php&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.LDDegL6ImS0.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCO3moWK4VG6CcM19m5AII4n45L9HA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&id=I0_1476610250333&parent=http%3A%2F%2Fdeveloper.alexanderklimov.ru&pfname=&rpctoken=33067180"],
img[src="http://db.c7.b3.a0.top.mail.ru/counter?id=228158;js=13;r=http%3A//developer.alexanderklimov.ru/android/;j=false;s=1920*1080;d=24;rand=0.22161993105217426"],
iframe[src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=small&annotation=inline&width=300&align=right&hl=ru&origin=http%3A%2F%2Fdeveloper.alexanderklimov.ru&url=http%3A%2F%2Fdeveloper.alexanderklimov.ru%2Fandroid%2Ffragment.php&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.LDDegL6ImS0.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCO3moWK4VG6CcM19m5AII4n45L9HA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&id=I0_1476610251365&parent=http%3A%2F%2Fdeveloper.alexanderklimov.ru&pfname=&rpctoken=22132524"],
img[src="http://db.c7.b3.a0.top.mail.ru/counter?id=228158;js=13;r=http%3A//developer.alexanderklimov.ru/android/;j=false;s=1920*1080;d=24;rand=0.25120505686816297"],
iframe[src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=small&annotation=inline&width=300&align=right&hl=ru&origin=http%3A%2F%2Fdeveloper.alexanderklimov.ru&url=http%3A%2F%2Fdeveloper.alexanderklimov.ru%2Fandroid%2Fdialogfragment_alertdialog.php&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.LDDegL6ImS0.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCO3moWK4VG6CcM19m5AII4n45L9HA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&id=I0_1476610252945&parent=http%3A%2F%2Fdeveloper.alexanderklimov.ru&pfname=&rpctoken=39880433"],
img[src="http://db.c7.b3.a0.top.mail.ru/counter?id=228158;js=13;r=http%3A//developer.alexanderklimov.ru/android/;j=false;s=1920*1080;d=24;rand=0.017512425951218047"],
iframe[src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=small&annotation=inline&width=300&align=right&hl=ru&origin=http%3A%2F%2Fdeveloper.alexanderklimov.ru&url=http%3A%2F%2Fdeveloper.alexanderklimov.ru%2Fandroid%2Flistfragment.php&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.LDDegL6ImS0.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCO3moWK4VG6CcM19m5AII4n45L9HA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&id=I0_1476610254564&parent=http%3A%2F%2Fdeveloper.alexanderklimov.ru&pfname=&rpctoken=12981724"],
img[src="http://db.c7.b3.a0.top.mail.ru/counter?id=228158;js=13;r=http%3A//developer.alexanderklimov.ru/android/;j=false;s=1920*1080;d=24;rand=0.940061656426485"]
{display:none !important;}</style>
<link rel="stylesheet" href="./32. Работаем с базой данных_files/icon">
</head>

<body data-gr-c-s-loaded="true"><a href="http://developer.alexanderklimov.ru/android/database.php#" class="back-to-top" pl3h9n4="" hidden="">Back to Top</a>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        
        <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
        <li class="active"><a href="http://developer.alexanderklimov.ru/android">Android <span class="sr-only">(current)</span></a></li>
        <li class=""><a href="http://developer.alexanderklimov.ru/dotnet/">C#/Visual Basic</a></li>
        <li class=""><a href="http://developer.alexanderklimov.ru/windowsphone/wp.php">Windows Phone</a></li>
        <li class=""><a href="http://developer.alexanderklimov.ru/php">PHP</a></li>
        <li class=""><a href="http://developer.alexanderklimov.ru/arduino">Arduino</a></li>
        <li class=""><a href="http://android-klimov.blogspot.ru/">Блог</a></li>
        </ul>


            <p class="navbar-text navbar-right">
			    <a data-toggle="modal" href="http://developer.alexanderklimov.ru/android/database.php#myModal" class="navbar-link">Гость</a>
                
            </p>
        </div><!--/.nav-collapse -->
    </div>
</div>

<div class="container-fluid">
<div class="row">
    <div class="col-md-5">
        <p>
		<a href="http://developer.alexanderklimov.ru/"><img src="./32. Работаем с базой данных_files/header.png" alt="Сайт разработчика Александра Климова" border="0" class="img-responsive"></a>
		</p>
    </div><!--/span-->
    
	<div class="col-md-5">
        <p style="color:green; font-style: italic; font-size: small;">
		/* Моя кошка замечательно разбирается в программировании. Стоит мне объяснить проблему ей - и все становится ясно. */<br>John Robbins, Debugging Applications, Microsoft Press, 2000
		</p>
    </div><!--/span-->
    
	<div class="col-md-2">
        <p>
		<a href="http://feeds.feedburner.com/alexanderklimov/VJcl"><img src="./32. Работаем с базой данных_files/kot-2-rss-100.png" border="0"></a>
		</p>
    </div><!--/span-->
</div><!--/row-->
</div>    
<div class="clearfix"></div>
    
<noindex><!--Rating@Mail.ru COUNTER--><script language="JavaScript" type="text/javascript"><!--
d=document;var a='';a+=';r='+escape(d.referrer)
js=10//--></script><script language="JavaScript1.1" type="text/javascript"><!--
a+=';j='+navigator.javaEnabled()
js=11//--></script><script language="JavaScript1.2" type="text/javascript"><!--
s=screen;a+=';s='+s.width+'*'+s.height
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth)
js=12//--></script><script language="JavaScript1.3" type="text/javascript"><!--
js=13//--></script><script language="JavaScript" type="text/javascript"><!--
d.write('<IMG src="http://db.c7.b3.a0.top.mail.ru/counter'+
'?id=228158;js='+js+a+';rand='+Math.random()+
'" height="1" width="1" alt="top.mail.ru" border="0" />')
if(11<js)d.write('<'+'!-- ')//--></script><img src="http://db.c7.b3.a0.top.mail.ru/counter?id=228158;js=13;r=http%3A//developer.alexanderklimov.ru/android/;j=false;s=1920*1080;d=24;rand=0.07053636855380407" height="1" width="1" alt="top.mail.ru" border="0" hidden="" style="display: none !important;"><!-- <noscript><img
src="http://db.c7.b3.a0.top.mail.ru/counter?js=na;id=228158"
height="1" width="1" alt="top.mail.ru" border="0" /></noscript><script language="JavaScript" type="text/javascript"><!--
if(11<js)d.write('--'+'>')//--><!--/COUNTER--></noindex>
<div class="container-fluid">
    
    <div class="row">
        <!--левое меню -->
		<div class="col-md-2 well-lg">
            <div class="sidebar panel panel-default">
            <ul class="nav nav-pills nav-stacked">
<li class="active"><a href="http://developer.alexanderklimov.ru/android/index.php" class="leftmenu">Главная</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/theory/" class="leftmenu">Теория</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/views/" class="leftmenu">Palette</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/listview/" class="leftmenu">ListView</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/catshop/" class="leftmenu">Котошоп</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/animation/" class="leftmenu">Анимация</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/sqlite/" class="leftmenu">SQLite</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/opengles/" class="leftmenu">OpenGL ES</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/library/" class="leftmenu">Библиотеки</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/games/" class="leftmenu">Игры</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/wear/" class="leftmenu">Wear</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/emulator/" class="leftmenu">Эмулятор</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/studio/" class="leftmenu">Android Studio</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/tips-android.php" class="leftmenu">Советы</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/articles-android.php" class="leftmenu">Статьи</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/books.php" class="leftmenu">Книги</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/java/java.php" class="leftmenu">Java. Экспресс-курс</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/design/" class="leftmenu">Дизайн</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/debug/" class="leftmenu">Отладка</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/opensource.php" class="leftmenu">Open Source</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/android/links.php" class="leftmenu">Полезные ресурсы</a></li>
</ul>            </div><!--/.well -->
        </div><!--/span-->


        <div class="col-md-8">

		<div class="row">
            <div class="col-md-12">
			
			<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span></button>
            <h3 class="modal-title" id="myModalLabel">Читайте на здоровье!</h3>
        </div>
        <div class="modal-body">
            <p>Статья проплачена кошками - всемирно известными производителями котят.</p>
            <p>Если статья вам понравилась, то можете <a href="http://developer.alexanderklimov.ru/donate.php">поддержать проект</a>.</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
        </div>
        </div>
    </div>
</div>            
<h1 class="text-warning">Работаем с базой данных</h1>

<p>
<a href="http://developer.alexanderklimov.ru/android/database.php#intro">Введение в базы данных SQLite</a><br>
<a href="http://developer.alexanderklimov.ru/android/database.php#createdb">Создаём базу данных</a><br>
<a href="http://developer.alexanderklimov.ru/android/database.php#workdb">Работаем с базой данных</a><br>
</p>

<h2 class="text-warning" id="intro">Введение в базы данных SQLite</h2>

<p>Android использует для работы с базами данных известную библиотеку SQLite. SQLite зарекомендовала себя в качестве чрезвычайно надёжной системы баз данных, которая используется во многих бытовых электронных устройствах и программах, включая некоторые MP3-проигрыватели, iPhone, iPod Touch, Mozilla Firefox и др.</p>

<p>С помощью SQLite вы можете создавать для своего приложения независимые реляционные базы данных. Android хранит базы данных в каталоге <b>/data/data/&lt;имя_вашего_пакета&gt;/databases</b> на эмуляторе, на устройстве путь может отличаться. По умолчанию все базы данных закрытые, доступ к ним могут получить только те приложения, которые их создали.</p>

<p>Каждая база данных состоит из двух файлов. Имя первого файла базы данных соответствует имени базы 
данных. Это основной файл баз данных SQLite, в нём хранятся все данные. Вы будете создавать его программно. Второй файл — файл журнала. Его имя состоит из имени базы данных и суффикса "-journal". В файле журнала хранится информация обо всех изменениях, внесенных в базу данных. Если в работе с данными возникнет проблема, Android использует данные журнала для отмены (или отката) последних изменений. Вы с ним не будете взаимодействовать, но если вы будете просматривать внутренности своего устройства, то будете знать, зачем этот файл там присутствует.</p>

<p>Те, кто имеет опыт работы со связкой PHP+MySQL, найдут много знакомых вещей и быстро разберутся с принципом работы. Для остальных постараюсь объяснить максимально доступно.</p>

<p>Прежде всего нужно запомнить, что в Android уже есть готовый класс <b>SQLiteOpenHelper</b>, от которого нужно наследоваться.</p>

<h2 class="text-warning" id="createdb">Создаём базу данных</h2>

<p>Наша цель - создать базу данных, внести в неё данные и прочитать эти данные путём вывода результатов чтения на экран.</p>

<p>Создадим новый проект как обычно. Для взаимодействия с базой данных нам будет достаточно кнопки и текстовой метки <b>TextView</b>, в которой будем выводить результат считывания данных.</p>

<pre><code class="xml">
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity"&gt;

    &lt;Button
        android:id="@+id/button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="onClick"
        android:text="Запрос к базе данных" /&gt;

    &lt;TextView
        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge" /&gt;

&lt;/LinearLayout&gt;
</code></pre>

<p>Пока ничего страшного. Разметка как разметка. Можно ещё добавить <b>ImageView</b> с изображением симпатичного котика, чтобы окончательно успокоиться.</p>

<p>Теперь чуть напрягитесь. При работе с базой данной принято создавать отдельный класс. Обычно, в проекте у нас уже есть один класс <b>MainActivity</b>, который относится к активности. А теперь будет два класса. Только второй класс будет наследоваться не от класса <b>Activity</b>, а от класса <b>SQLiteOpenHelper</b>.</p>

<p>Созданный класс будет работать с базой данных - добавлять, выбирать, удалять и прочие операции.</p>

<p>Щёлкаем правой кнопкой мыши на имени пакета в левой части студии и выбираем в меню <b>New</b> | <b>Java Class</b> и в диалоговом окне выбираем имя для нового класса, например, <b>DatabaseHelper</b>. Слово <b>Helper</b> обычно используют, чтобы показать, что класс является обёрткой (вспомогательным классом) какого-то абстрактного класса. Впрочем, вы можете придумать более замысловатое название, например, <b>ILoveNewYork</b> или <b>CatsForever</b>. Спустя год, когда вы вернётесь к своему примеру, это будет так увлекательно вспоминать, для чего был создан класс с таким красивым именем.</p>

<p>У нас появится заготовка. Наследуемся от <b>SQLiteOpenHelper</b>. Студия предложит создать два обязательных метода <b>onCreate()</b> и <b>onUpgrade()</b>, о которых поговорим позже.</p>

<p><img src="./32. Работаем с базой данных_files/database1.png" alt="New Class"></p>

<p>После добавления методов студия по-прежнему ругается. Теперь ему подавай конструкторы. Получится такой код.:</p>

<pre><code class="java">
package ru.alexanderklimov.database;

import android.content.Context;
import android.database.DatabaseErrorHandler;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;


public class DatabaseHelper extends SQLiteOpenHelper {
    public DatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory,
                          int version) {
        super(context, name, factory, version);
    }

    public DatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory,
                          int version, DatabaseErrorHandler errorHandler) {
        super(context, name, factory, version, errorHandler);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
}
</code></pre>

<p>Во многих примерах в интернете (и в официальной документации) я видел также, что в класс добавляется ещё один конструктор с двумя константами, который является упрощённым вариантом второго конструктора. Позже я покажу его удобство, а пока добавим новый код в класс.</p>

<pre><code class="java">
// имя базы данных
private static final String DATABASE_NAME = "mydatabase.db";
// версия базы данных
private static final int DATABASE_VERSION = 1;

DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}
</code></pre>

<p>Третий параметр <b>null</b> в суперклассе используется для работы с курсорами. Сейчас их не используем, поэтому оставим в покое.</p>

<p>Как вы уже догадались, константа <b>DATABASE_NAME</b> отвечает за имя файла, в котором будет храниться база данных приложения. Можно придумать любое имя и обойтись без расширения. Но мне так привычнее.</p>

<p>Вторая константа <b>DATABASE_VERSION</b> требует дополнительных объяснений. Она отвечает за номер версии базы. Принцип её работы схож с номером версий самого приложения. Когда мы видим, что вышла новая версия Chrome 33, то понимаем, что пора обновляться. Аналогично поступает и само приложение, когда замечает, что номер версии базы стал другим. Как только программа заметила обновление номера базы, она запускает метод <b>onUpgrade()</b>, который у нас сформировался автоматически. В этом методе необходимо разместить код, который должен сработать при обновлении базы.</p>

<p>Теперь нужно объяснить, зачем нужен этот метод <b>onUpgrade()</b>. Представьте ситуацию, что вы первоначально создали в базе таблицу, в которую заносятся имена котов и их электронные адреса и телефоны (продвинутые кошаки). Вроде всё замечательно. Если нужно поздравить усатых-полосатых с Международным днём кошек, который отмечается 1 марта, то проблем нет никаких. У вас есть список имён, по которому вы можете пройтись и лично написать каждому письмо. Пользователи, скачавшие ваше приложение, с удовольствием заполняют базу данных и дружно пишут письма мелким почерком. И вдруг до вас дошло, что совершили непростительную ошибку. Вы забыли добавить в базу данных даты рождения котов. А значит их никто не поздравит и не погладит (((.</p>

<p><img src="./32. Работаем с базой данных_files/birthdaycat.jpg" alt="День рождения у Кота"></p>

<p>Вы исправляете досадное упущение и выкладываете новую версию программы в открытый доступ. Новые пользователи, которые установят программу первый раз, радуются жизни - у них есть все необходимые данные для работы. Но что делать тем, кто уже работает со старой программой? Обновившись, они увидят дополнительное текстовое поле для ввода даты рождения, но в старой базе нет колонки для хранения новых данных. И ваша программа завершится с ошибкой. Полностью удалять и устанавливать новую версию программы тоже не выход - тогда пропадут старые данные, что тоже не желательно. Для таких случаев вы пишете код в методе <b>onUpgrade()</b>, чтобы при обновлении поменялась структура базы данных у старых пользователей. Мы позже попробуем смоделировать эту ситуацию.</p>

<p>Метод <b>onCreate()</b> вопросов не вызывает - здесь создаётся сама база данных с необходимыми данными для работы.</p>

<p>Когда ваше приложение будет готово, то в папке <b>data/data/имя_пакета/databases</b> появится файл <b>mydatabase.db</b> (позже я вам покажу). Этот файл и будет вашей базой данных, в которой будет находиться созданная вами таблица. На данный момент в студии нет плагина для просмотра таблиц (в Eclipse есть). Надеюсь, со временем добавят поддержку. А пока вам придётся скачивать из устройства файл базы данных и просматривать его на компьютере специальными программами, работающими с SQLite на локальном компьютере.</p>

<p>Дальше идёт наполнение класса данными. Давайте для начала создадим совсем простую таблицу, которая будет содержать только имена котов. В первую очередь нам нужно определиться с именем таблицы в созданной базе данных <b>mydatabase.db</b>. Это обычная строка, поэтому создаём строковую константу для имени таблицы.</p><p>

</p><pre><code class="java">
// имя таблицы
private static final String DATABASE_TABLE = "cats";
</code></pre>

<p>Также нужно указать имена столбцов для таблицы.  Приложение будет обращаться к столбцам для извлечения данных, поэтому создадим публичные константы для столбцов с понятными именами. Наша таблица будет состоять из трёх столбцов: имя кота, его телефон и возраст.</p>

<pre><code class="java">
// названия столбцов
public static final String CAT_NAME_COLUMN = "cat_name";
public static final String PHONE_COLUMN = "phone";
public static final String AGE_COLUMN = "age";
</code></pre>

<p>Следующим приёмом редко пользуются, но я вам его покажу. Добавим реализацию интерфейса <b>BaseColumn</b>:</p>

<pre><code class="java">
public class DatabaseHelper extends SQLiteOpenHelper <b>implements BaseColumns</b> {
</code></pre>

<p>Что это нам даёт? В большинстве случаев работа с базой данных происходит через специальные объекты <b>Cursor</b>, которые требуют наличия в таблице колонки с именем <b>_id</b> (дополнительный четвёртый столбец в нашем примере). Вы можете создать столбец вручную в коде, а можно положиться на <b>BaseColumn</b>, который создаст столбец с нужным именем автоматически. Дело ваше. Если вы не будете работать с курсорами, то можете использовать и стандартное наименование <b>id</b> или вообще не использовать данный столбец, но не советую так поступать, чтобы не вырабатывать вредных привычек.</p>

<p>Теперь перейдём к методам и начнём с метода <b>onCreate()</b>, который вызывается, если в устройстве нет базы данных и наш класс должен создать его. Как мы помним, у метода есть параметр <b>db</b>, который относится к классу <b>SQLiteDatabase</b>. У класса есть специальный метод <b>execSQL()</b>, которому нужно передать запрос (SQL-скрипт) для создания таблицы. Для создания таблицы в SQL используется команда <b>CREATE TABLE ...</b>. Для удобства вынесем команду в отдельную строку. Аналогично поступим с командой <b>DROP TABLE</b>. Так как строка очень длинная и состоит из множества строковых переменных, которые нужно соединить в одну цепочку, то поступают следующим образом. Создаём ещё одну строковую константу для формирования скрипта и передадим её в метод.</p>

<pre><code class="java">
private static final String DATABASE_CREATE_SCRIPT = "create table "
		+ DATABASE_TABLE + " (" + BaseColumns._ID
		+ " integer primary key autoincrement, " + CAT_NAME_COLUMN
		+ " text not null, " + PHONE_COLUMN + " integer, " + AGE_COLUMN
		+ " integer);";
        
@Override
public void onCreate(SQLiteDatabase db) {
	db.execSQL(DATABASE_CREATE_SCRIPT);
}
</code></pre>

<p>Основная сложность - не пропустить пробелы в запросе. Очень часто пропущенный пробел становится источником проблем и ваше приложение не может создать таблицу. Можете сначала написать сам скрипт создания таблицы, а уже потом заменять отдельные слова константами. Идентификатор <b>_id</b> всегда должен использовать <b>integer primary key autoincrement</b>, остальные колонки на ваше усмотрение. В примере я специально использовал два разных варианта - <b>text</b> и <b>integer</b>.</p>

<p>Второй метод <b>onUpgrade()</b> вызывается при несовпадении версий. Часто в этом методе просто удаляют существующую таблицу и заменяют её на новую. Это самое простое и практичное решение. Впрочем, на первых порах, вам вряд ли придётся заниматься подобными делами, поэтому метод можно оставить даже пустым.</p>

<pre><code class="java">
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
	// Запишем в журнал
	Log.w("SQLite", "Обновляемся с версии " + oldVersion + " на версию " + newVersion);
	
	// Удаляем старую таблицу и создаём новую
	db.execSQL("DROP TABLE IF IT EXISTS " + DATABASE_TABLE);
	// Создаём новую таблицу
	onCreate(db);
}
</code></pre>

<p>Полностью код будет следующим:</p>

<pre><code class="java">
package ru.alexanderklimov.database;


import android.content.Context;
import android.database.DatabaseErrorHandler;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.provider.BaseColumns;
import android.util.Log;

public class DatabaseHelper extends SQLiteOpenHelper implements BaseColumns {

    // названия столбцов
    public static final String CAT_NAME_COLUMN = "cat_name";
    public static final String PHONE_COLUMN = "phone";
    public static final String AGE_COLUMN = "age";
    // имя базы данных
    private static final String DATABASE_NAME = "mydatabase.db";
    // версия базы данных
    private static final int DATABASE_VERSION = 1;
    // имя таблицы
    private static final String DATABASE_TABLE = "cats";
    private static final String DATABASE_CREATE_SCRIPT = "create table "
            + DATABASE_TABLE + " (" + BaseColumns._ID
            + " integer primary key autoincrement, " + CAT_NAME_COLUMN
            + " text not null, " + PHONE_COLUMN + " integer, " + AGE_COLUMN
            + " integer);";

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    public DatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory,
                          int version) {
        super(context, name, factory, version);
    }

    public DatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory,
                          int version, DatabaseErrorHandler errorHandler) {
        super(context, name, factory, version, errorHandler);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(DATABASE_CREATE_SCRIPT);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Запишем в журнал
        Log.w("SQLite", "Обновляемся с версии " + oldVersion + " на версию " + newVersion);

        // Удаляем старую таблицу и создаём новую
        db.execSQL("DROP TABLE IF IT EXISTS " + DATABASE_TABLE);
        // Создаём новую таблицу
        onCreate(db);
    }
}
</code></pre>

<h2 class="text-warning" id="workdb">Работаем с базой данных</h2>

<p>Переходим к главной активности и напишем код для кнопки:</p>

<pre><code class="java">
private DatabaseHelper mDatabaseHelper;

public void onClick(View v) {
	mDatabaseHelper = new DatabaseHelper(this, "mydatabase.db", null, 1);
	SQLiteDatabase sdb;
	sdb = mDatabaseHelper.getReadableDatabase();
}
</code></pre>

<p>Мы использовали второй конструктор из примера, но можно было написать и <b>new DatabaseHelper(this)</b> с использованием упрощённого конструктора, о котором я вам говорил выше. Таким образом, вы можете перенести логику создания базы в отдельный класс.</p>

<p>Запустите проект. Нажав на кнопку, вы создадите на устройстве базу данных. Убедиться в этом можно, если запустить <b>Android Device Monitor</b>. Выберите вкладку <b>File Explorer</b> и найдите своё приложение (на эмуляторе). Вы увидите, что появилась папка <b>data/data/имя_пакета/databases</b> с файлом <b>mydatabase.db</b>. Метод <b>getReadableDatabase</b> создаёт или открывает базу данных.</p>

<p>Сейчас база данных пуста. Поступим следующим образом. Перенесём код для открытия базы данных в метод <b>onCreate()</b> и там же добавим новую запись. А при нажатии кнопки получим добавленную запись и выведем её в текстовом блоке.</p>

<p>Небольшое предупреждение. При работе с базой данных мы обращаемся к файлу. Если база данных очень большая, то запросы не будут мгновенными. Операции с файлами являются медленными, поэтому следует использовать многопоточность. Для наших примеров это не страшно, поэтому мы пока не будем усложнять код.</p>

<pre><code class="java">
private DatabaseHelper mDatabaseHelper;
private SQLiteDatabase mSqLiteDatabase;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    mDatabaseHelper = new DatabaseHelper(this, "mydatabase.db", null, 1);

    mSqLiteDatabase = mDatabaseHelper.getWritableDatabase();

    ContentValues values = new ContentValues();
    // Задайте значения для каждого столбца
    values.put(DatabaseHelper.CAT_NAME_COLUMN, "Рыжик");
    values.put(DatabaseHelper.PHONE_COLUMN, "4954553443");
    values.put(DatabaseHelper.AGE_COLUMN, "5");
    // Вставляем данные в таблицу
    mSqLiteDatabase.insert("cats", null, values);
}

public void onClick(View view) {
    Cursor cursor = mSqLiteDatabase.query("cats", new String[] {DatabaseHelper.CAT_NAME_COLUMN,
                    DatabaseHelper.PHONE_COLUMN, DatabaseHelper.AGE_COLUMN},
            null, null,
            null, null, null) ;

    cursor.moveToFirst();

    String catName = cursor.getString(cursor.getColumnIndex(DatabaseHelper.CAT_NAME_COLUMN));
    int phoneNumber = cursor.getInt(cursor.getColumnIndex(DatabaseHelper.PHONE_COLUMN));
    int age = cursor.getInt(cursor.getColumnIndex(DatabaseHelper.AGE_COLUMN));

    TextView infoTextView = (TextView)findViewById(R.id.textView);
    infoTextView.setText("Кот " + catName + " имеет телефон " + phoneNumber + " и ему " +
            age + " лет");

    // не забываем закрывать курсор
    cursor.close();
}
</code></pre>

<p>Запустите проект и убедитесь, что в текстовой метке выводится запись. Сразу предупрежу, что когда вы будете запускать программу, то каждый раз будет вставляться новая запись в базу данных. Поэтому после первого запуска можете закомментировать вставку новой записи в методе <b>onCreate()</b>. Или удаляйте программу и ставьте её заново.</p>

<p>Обратите внимание, что телефонный номер выводится совсем не такой, какой мы вводили в базу данных. Почему? Это вам в качестве домашнего задания.</p>

<h2 class="text-warning" id="insertdata">Вставка данных</h2>

<p>Теперь разберём по кусочкам, как делать основные операции с данными. Начнём с вставки.</p>

<h3 class="text-warning">Первый способ. ContentValues</h3>

<p>Для вставки сначала подготавливаются данные с помощью класса <b>ContentValues</b>. Вы указываете имя колонки таблицы и значение для неё, т.е. работает по принципу "ключ-значение". Когда подготовите все данные во все столбцы, то вызывайте метод <b>insert()</b>, который сразу раскидает данные по столбцам. В методе <b>onCreate()</b> мы уже выполнили эту работу.</p>

<p>Способ очень удобен, требует мало кода и легко читаем. Вы создаёте экземпляр класса, а затем с помощью метода <b>put()</b> записываете в нужную колонку нужные данные. После чего вызывается метод <b>insert()</b>, который помещает подготовленные данные в таблицу.</p>

<p>Если колонок несколько, то вызывайте метод <b>put()</b> несколько раз:</p>

<pre><code class="java">
// Задайте значения для каждого столбца
values.put(DatabaseHelper.CAT_NAME_COLUMN, "Рыжик");
values.put(DatabaseHelper.PHONE_COLUMN, "4954553443");
values.put(DatabaseHelper.AGE_COLUMN, "5");
</code></pre>

<p>У метода <b>insert()</b> три аргумента. В первом указывается имя таблицы, в которую будут добавляться записи. В третьем указывается объект <b>ContentValues</b>, созданный ранее. Второй аргумент используется для указания колонки. SQL не позволяет вставлять пустую запись, и если будет использоваться пустой <b>ContentValue</b>, то укажите во втором аргументе <b>null</b> во избежание ошибки. Проследите, чтобы колонка в таблице позволяла принимать <b>NULL</b>.</p>

<h3 class="text-warning">Второй способ. SQL-запрос</h3>

<p>Существует также другой способ вставки через метод <b>execSQL()</b>, когда подготавливается нужная строка и запускается скрипт. Этот способ возможно понравится PHP-кодерам, которые привыкли к такому синтаксису.</p>

<p>В этом варианте используется традиционный SQL-запрос <b>INSERT INTO...</b>. Основное неудобство при этом способе - не запутаться в кавычках. Если что-то не вставляется, то смотрите логи сообщений.</p>

<pre><code class="java">
// Абстрактный пример
db = new DatabaseHelper(this);
SQLiteDatabase sqdb = db.getWritableDatabase();

String insertQuery = "INSERT INTO " + 
        DatabaseHelper.DATABASE_TABLE + 
        " (" + DatabaseHelper.CAT_NAME_COLUMN + ") VALUES ('Васька')";
sqdb.execSQL(insertQuery);
</code></pre>

<h2 class="text-warning" id="updatedata">Изменение данных</h2>

<p>Если запись уже существует, но вам нужно изменить какое-то значение, то вместо <b>insert()</b> используйте метод <b>update()</b>. В остальном принцип тот же. Предположим, что повторном осмотре котёнка выяснилось, что это кот, а не кошка. Если вы уже назвали котёнка Муркой, то логично назвать его теперь Мурзиком. Вызываем метод <b>put()</b>, а затем обновляем запись в базе данных.</p>

<pre><code class="java">
ContentValues values = new ContentValues();
values.put(DatabaseHelper.CAT_NAME_COLUMN, "Мурзик");
mSqLiteDatabase.update(mDatabaseHelper.DATABASE_TABLE,
        values,
        mDatabaseHelper.CAT_NAME_COLUMN + "= ?", new String[]{"Мурка"});
</code></pre>

<p>Первый параметр метода <b>update()</b> содержит имя таблицы. Второй параметр указывает, какие значения должны использоваться для обновления. Третий параметр задает условия отбора обновляемых записей (where). В приведенном примере "NAME = ?"означает, что столбец NAME должен быть равен некоторому значению. Символ <b>?</b> обозначает значение столбца, которое определяется содержимым последнего параметра. Если в двух последних параметрах метода передаётся значение <b>null</b>, будут обновлены ВСЕ записи в таблице.</p>

<p>Возможны и сложные условия.</p>

<pre><code class="java">
db.update(mDatabaseHelper.TABLE_NAME, 
    values,
    "NAME = ? OR EMAIL = ?", 
    new String[] {"Васька", "vaska@cat.com"});
</code></pre>

<p>Если столбец не является строкой, то его нужно преобразовать в строку, чтобы использовать в качестве условий.</p>

<pre><code class="java">
db.update(mDatabaseHelper.TABLE_NAME, 
    values,
    "_id = ?", 
    new String[] {Integer.toString(1)});
</code></pre>

<p>Будьте осторожны с обновлениями. Если в последних двух параметрах передать значение <b>null</b>, то будут обновлены все записи в таблице, так как в запросе нет условий.</p>

<pre><code class="java">
db.update(mDatabaseHelper.TABLE_NAME, 
    values,
    null, null);
</code></pre>

<h2 class="text-warning" id="deletedata">Удаление данных</h2>

<p>Метод <b>delete()</b> класса SQLiteDatabase работает по тому же принципу, как и метод <b>update()</b>. Он имеет следующую форму:</p>

<pre><code class="java">
public int delete (String table,
    String whereClause,
    String[] whereArgs)
</code></pre>

<p>Разобравшись с базовым примером, вам будет проще понять другие примеры, связанные с базой данных. Существуют различные приёмы и техники, упрощающие работу с базой данных - вспомогательные классы-обёртки в качестве адаптеров, обёртки для методов вставки и извлечения данных и т.д. Но основа будет такая же, как у нашего примера.</p>

<h2 class="text-warning">Чтение данных</h2>

<p>Считывать данные также можно двумя способами. В любом случае результат возвращается в виде объекта <b>Cursor</b>. Не путайте его с курсором мыши, который бегает у вас на экране.</p>

<p><img src="./32. Работаем с базой данных_files/cursorcat.gif" alt="Cursor"></p>

<h3 class="text-warning">Первый способ. Метод query()</h3>

<p>А извлечение данных происходит через метод <b>query()</b>. Данные хранятся в наборе строк, которые можно представить в виде таблицы. Из этой таблицы вы уже можете извлечь конкретное значение.</p>

<p>У метода <b>query()</b> множество параметров. В первом параметре укажите имя таблицы, во втором - массив имён колонок, далее идут дополнительные условия. Пока везде оставим <b>null</b>. В нашем примере мы добавили одну запись и извлечь её просто.</p>

<pre><code class="java">
Cursor cursor = mSqLiteDatabase.query("cats", new String[]{DatabaseHelper.CAT_NAME_COLUMN,
                DatabaseHelper.PHONE_COLUMN, DatabaseHelper.AGE_COLUMN},
        null, null,
        null, null, null);

cursor.moveToFirst();

String catName = cursor.getString(cursor.getColumnIndex(DatabaseHelper.CAT_NAME_COLUMN));
long phoneNumber = cursor.getLong(cursor.getColumnIndex(DatabaseHelper.PHONE_COLUMN));
int age = cursor.getInt(cursor.getColumnIndex(DatabaseHelper.AGE_COLUMN));

TextView infoTextView = (TextView) findViewById(R.id.textView);
infoTextView.setText("Кот " + catName + " имеет телефон " + phoneNumber + " и ему " +
        age + " лет");

// не забываем закрывать курсор
cursor.close();
</code></pre>

<p><img src="./32. Работаем с базой данных_files/simplydatabase3.png" alt="Запрос к базе данных"></p>

<p>Мы переходим к первой записи (метод <b>moveToFirst()</b>) и считываем данные, которые выводим в текстовой метке.</p><p>

</p><p>Если в таблице записей много, то следует произвести последовательный перебор через цикл <b>while</b>.</p>

<pre><code class="java">
// Абстрактный пример
Cursor cursor = mDatabase.query(mDatabaseHelper.TABLE_NAME, new String[]{
                DatabaseHelper.COLUMN_ID, DatabaseHelper.CAT_NAME_COLUMN}, null,
        null,
        null,
        null,
        null
);
while (cursor.moveToNext()) {
    int id = cursor.getInt(cursor.getColumnIndex(DatabaseHelper.COLUMN_ID));
    String name = cursor.getString(cursor
            .getColumnIndex(DatabaseHelper.CAT_NAME_COLUMN));
    Log.i("LOG_TAG", "ROW " + id + " HAS NAME " + name);
}
cursor.close();
</code></pre>

<h3 class="text-warning">Второй способ. Метод rawQuery()</h3>

<p>Второй способ использует сырой (raw) SQL-запрос. Сначала формируется строка запроса и скармливается методу <b>rawQuery()</b>.</p>

<pre><code class="java">
// Абстрактный пример
// Метод 2: Сырой SQL-запрос
String query = "SELECT " + DatabaseHelper.COLUMN_ID + ", "
        + DatabaseHelper.CAT_NAME_COLUMN + " FROM " + DatabaseHelper.TABLE_NAME;
Cursor cursor2 = mDatabase.rawQuery(query, null);
while (cursor2.moveToNext()) {
    int id = cursor2.getInt(cursor2
            .getColumnIndex(DatabaseHelper.COLUMN_ID));
    String name = cursor2.getString(cursor2
            .getColumnIndex(DatabaseHelper.CAT_NAME_COLUMN));
    Log.i("LOG_TAG", "ROW " + id + " HAS NAME " + name);
}
cursor2.close();
</code></pre>

<p>Итак, мы научились создавать базу данных, заносить данные и считывать данные. Изучите пример досконально, чтобы всё улеглось в голове. Пример очень базовый. Обычно создают отдельный класс для работы с запросами базы данных и класс-обёртку на основе <b>SQLiteOpenHelper</b> помещают в него. А затем создают в новом классе отдельные методы для добавления, извлечения, обновления данных - CRUD.</p>

<p>Естественно, мы можем выводить данные не только в лог, но и в адаптеры для <b>Spinner</b> или <b>ListView</b>. Об этом поговорим в других примерах.</p>

<h2 class="text-warning">Дополнительное чтение</h2>

<p><a href="http://developer.alexanderklimov.ru/android/sqlite/">Отдельный раздел, посвящённый SQLite</a></p>
<p><a href="http://developer.alexanderklimov.ru/android/sqlite/simplydatabase2.php">Простейшая база данных. Часть вторая</a></p>

<p><a href="http://forum.alexanderklimov.ru/viewtopic.php?id=33">Обсуждение статьи</a> на форуме.</p>

<h5 class="text-error">Реклама</h5>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-4224968932772057";
/* Полноразмерный баннер 728х90 */
google_ad_slot = "4077523505";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<p>

</p>

</div><!--/span-->
</div><!--/row-->	
</div><!--/span-->
		
	<div class="col-md-2">
        <div class="well sidebar-nav">
    <h4><span class="label label-info">Реклама</span></h4>
    <script type="text/javascript">
    google_ad_client = "ca-pub-4224968932772057";
    google_ad_slot = "8217353101";
    google_ad_width = 160;
    google_ad_height = 600;
</script>
<!-- 160 x 600 -->
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div><!--/.well -->    </div><!--/span-->
</div><!--/row-->
	
<hr>
	  
<div class="row">
	<div class="col-md-12">
	    <img src="./32. Работаем с базой данных_files/cat_bottom.png" align="right">
    </div><!--/span-->
</div><!--/row-->

<footer>
    <noindex>
    <span style="float:left; margin:3px 1px 1px 2px;">
	    © 2016 <a href="mailto:rusproject@mail.ru">А.Климов</a>
		<!-- Place this code where you want the badge to render. -->
        <a href="http://plus.google.com/109061106977829925124?prsrc=3" rel="publisher" style="text-decoration:none;">
        <img src="http://ssl.gstatic.com/images/icons/gplus-16.png" alt="Google+" style="border: 0px; width: 16px; height: 16px; display: none !important;" hidden="" pl3h9n4=""></a>
    </span>
	
    <span style="float: right; margin:3px 5px 1px 1px; font-size:22px;">
        <!--Rating@Mail.ru LOGO--><a target="_top" href="http://top.mail.ru/jump?from=228158"><img src="http://db.c7.b3.a0.top.mail.ru/counter?id=228158;t=223;l=1" border="0" height="31" width="88" alt="Рейтинг@Mail.ru" hidden="" style="display: none !important;"></a><!--/LOGO-->
	</span>
    
    <span style="float: right; margin:2px 70px 1px 1px; font-size:22px;">
        <a href="http://feeds.feedburner.com/alexanderklimov/VJcl"><img src="./32. Работаем с базой данных_files/VJcl" height="26" width="88" style="border: 0px; display: none !important;" alt="" hidden=""></a>
	</span>
	
<div style="float: right; margin:2px 70px 1px 1px;">
    <!-- Place this tag where you want the +1 button to render. -->
    <div id="___plusone_0" style="position: absolute; width: 450px; left: -10000px;"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: absolute; top: -10000px; width: 450px; margin: 0px; border-style: none; display: none !important;" tabindex="0" vspace="0" width="100%" id="I0_1476610255547" name="I0_1476610255547" src="./32. Работаем с базой данных_files/fastbutton.html" hidden="" data-gapiattached="true"></iframe></div><div class="g-plusone" data-size="small" data-annotation="inline" data-width="300" data-align="right" data-gapiscan="true" data-onload="true" data-gapistub="true" pl3h9n4="" hidden=""></div>
</div>

<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  window.___gcfg = {lang: 'ru'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
	
</noindex>
</footer>

</div><!--/.fluid-container-->    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./32. Работаем с базой данных_files/jquery-1.11.0.min.js.Без названия"></script>
	<script src="./32. Работаем с базой данных_files/jquery-migrate-1.2.1.min.js.Без названия"></script>
    <!-- 
    <script src="http://developer.alexanderklimov.ru/assets/js/jquery.js"></script> 
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-transition.js"></script>
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-alert.js"></script>
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-modal.js"></script> 
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-dropdown.js"></script>
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-scrollspy.js"></script>
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-tab.js"></script>
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-tooltip.js"></script>
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-popover.js"></script>
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-button.js"></script>
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-collapse.js"></script>
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-carousel.js"></script>
    <script src="http://developer.alexanderklimov.ru/assets/js/bootstrap-typeahead.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    -->
    
    <script src="./32. Работаем с базой данных_files/backtotop.js.Без названия"></script>
    <script src="./32. Работаем с базой данных_files/bootstrap.min.js.Без названия" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    
    
    


<iframe name="oauth2relay886306130" id="oauth2relay886306130" src="./32. Работаем с базой данных_files/postmessageRelay.html" tabindex="-1" aria-hidden="true" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe></body><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html>